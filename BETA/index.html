<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Serbest Ã‡izgi ile 3D Origami</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background-color: #2c3e50;
    margin: 0;
    font-family: sans-serif;
    overflow: hidden;
  }

  .info-text {
    color: #ecf0f1;
    font-size: 18px;
    margin-bottom: 20px;
    text-align: center;
  }

  /* 3D Kamera Perspektifi */
  .scene {
    perspective: 1500px;
  }

  /* Ana KaÄŸÄ±t AlanÄ± */
  .paper-container {
    position: relative;
    width: 600px;
    height: 400px;
    cursor: crosshair;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    background-color: #bdc3c7; /* KatlanÄ±nca altta kalacak gÃ¶lge zemin */
  }

  /* KaÄŸÄ±dÄ±n Ä°ki ParÃ§asÄ± (BaÅŸlangÄ±Ã§ta Ã¼st Ã¼ste duruyorlar) */
  .paper-layer {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, #f1c40f 0%, #e67e22 100%);
    
    /* KatlandÄ±ÄŸÄ± anlaÅŸÄ±lsÄ±n diye kaÄŸÄ±da desen ve yazÄ± ekliyoruz */
    background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.2) 25%, transparent 25%, transparent 75%, rgba(255,255,255,0.2) 75%, rgba(255,255,255,0.2));
    background-size: 40px 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 100px;
    font-weight: bold;
    color: rgba(255,255,255,0.3);
    
    transform-style: preserve-3d;
    transition: transform 1s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  /* Ã‡izdiÄŸimiz kÄ±rmÄ±zÄ± eksen Ã§izgisi */
  .draw-line {
    position: absolute;
    height: 3px;
    background-color: #e74c3c;
    transform-origin: 0 50%;
    pointer-events: none; /* Fare etkileÅŸimini engelle */
    z-index: 10;
    display: none;
    box-shadow: 0 0 10px #e74c3c;
  }

  #part1 { z-index: 2; } /* Katlanacak olan hareketli parÃ§a */
  #part2 { z-index: 1; } /* Sabit kalacak olan parÃ§a */

  /* KatlandÄ±ÄŸÄ±nda hareketli parÃ§aya gÃ¶lge ekle */
  #part1.folded {
    filter: drop-shadow(-5px 10px 15px rgba(0,0,0,0.4));
  }
</style>
</head>
<body>

  <div class="info-text">
    ğŸ‘† <b>TÄ±kla ve SÃ¼rÃ¼kle:</b> KaÄŸÄ±t Ã¼zerinde bir Ã§izgi Ã§ek ve bÄ±rak! <br>
    <span style="font-size: 14px; opacity: 0.8;">AÃ§mak iÃ§in tekrar tÄ±kla.</span>
  </div>

  <div class="scene">
    <div class="paper-container" id="paper">
      <div class="paper-layer" id="part2">ORIGAMI</div>
      <div class="paper-layer" id="part1">ORIGAMI</div>
      <div class="draw-line" id="line"></div>
    </div>
  </div>

  <script>
    const paper = document.getElementById('paper');
    const part1 = document.getElementById('part1');
    const part2 = document.getElementById('part2');
    const line = document.getElementById('line');
    
    let isDrawing = false;
    let isFolded = false;
    let startX, startY;

    // 1. Ã‡izmeye BaÅŸla
    paper.addEventListener('mousedown', (e) => {
      // EÄŸer zaten katlÄ±ysa, Ã¶nce kaÄŸÄ±dÄ± dÃ¼zelt
      if (isFolded) {
        part1.style.transform = 'none';
        part1.style.clipPath = 'none';
        part2.style.clipPath = 'none';
        part1.classList.remove('folded');
        line.style.display = 'none';
        isFolded = false;
        return;
      }

      const rect = paper.getBoundingClientRect();
      startX = e.clientX - rect.left;
      startY = e.clientY - rect.top;
      isDrawing = true;
      
      line.style.display = 'block';
      line.style.width = '0px';
      line.style.left = startX + 'px';
      line.style.top = startY + 'px';
    });

    // 2. Ã‡izgiyi SÃ¼rÃ¼kle (GÃ¶rsel Animasyon)
    paper.addEventListener('mousemove', (e) => {
      if (!isDrawing) return;
      const rect = paper.getBoundingClientRect();
      let currentX = e.clientX - rect.left;
      let currentY = e.clientY - rect.top;
      
      let dx = currentX - startX;
      let dy = currentY - startY;
      let length = Math.sqrt(dx*dx + dy*dy);
      let angle = Math.atan2(dy, dx) * 180 / Math.PI;
      
      line.style.width = length + 'px';
      line.style.transform = `rotate(${angle}deg)`;
    });

    // 3. FiÅŸi Ã‡ek ve Katla!
    window.addEventListener('mouseup', (e) => {
      if (!isDrawing) return;
      isDrawing = false;
      
      const rect = paper.getBoundingClientRect();
      let endX = e.clientX - rect.left;
      let endY = e.clientY - rect.top;
      
      let dx = endX - startX;
      let dy = endY - startY;
      let length = Math.sqrt(dx*dx + dy*dy);
      
      // EÄŸer Ã§ok kÄ±sa bir Ã§izgi Ã§ekildiyse iptal et (Sadece tÄ±klama yapÄ±lmÄ±ÅŸ olabilir)
      if (length < 20) { 
        line.style.display = 'none';
        return; 
      }

      // --- Ä°ÅÄ°N MATEMATÄ°K KISMI ---
      // Ã‡izginin vektÃ¶r yÃ¶nÃ¼nÃ¼ (u) ve ona dik olan normal vektÃ¶rÃ¼nÃ¼ (n) bul
      let ux = dx / length;
      let uy = dy / length;
      let nx = -uy;
      let ny = ux;
      
      // KaÄŸÄ±dÄ± bÃ¶lecek devasa Ã§okgenler (Polygon) oluÅŸturmak iÃ§in Ã§arpan
      let K = 5000; 
      
      // Ã‡izgiyi sonsuza uzat (GÃ¶rÃ¼nmez makas kesikleri)
      let p1x = startX - ux * K; let p1y = startY - uy * K;
      let p2x = startX + ux * K; let p2y = startY + uy * K;
      
      // 1. ParÃ§anÄ±n maskesi (Ã‡izginin bir tarafÄ±)
      let c1x = p2x + nx * K; let c1y = p2y + ny * K;
      let c2x = p1x + nx * K; let c2y = p1y + ny * K;
      part1.style.clipPath = `polygon(${p1x}px ${p1y}px, ${p2x}px ${p2y}px, ${c1x}px ${c1y}px, ${c2x}px ${c2y}px)`;
      
      // 2. ParÃ§anÄ±n maskesi (Ã‡izginin diÄŸer tarafÄ±)
      let c3x = p2x - nx * K; let c3y = p2y - ny * K;
      let c4x = p1x - nx * K; let c4y = p1y - ny * K;
      part2.style.clipPath = `polygon(${p1x}px ${p1y}px, ${p2x}px ${p2y}px, ${c3x}px ${c3y}px, ${c4x}px ${c4y}px)`;
      
      // Katlama menteÅŸesini (orijinini) Ã§izginin baÅŸladÄ±ÄŸÄ± yere taÅŸÄ±
      part1.style.transformOrigin = `${startX}px ${startY}px`;
      
      // 3D uzayda tam Ã§izginin (dx, dy) ekseni etrafÄ±nda 179 derece dÃ¶ndÃ¼r!
      // (180 yapmÄ±yoruz ki Z dÃ¼zleminde diÄŸer kaÄŸÄ±dÄ±n iÃ§ine girip glitch yapmasÄ±n)
      setTimeout(() => {
        part1.style.transform = `rotate3d(${dx}, ${dy}, 0, 179deg)`;
        part1.classList.add('folded');
        isFolded = true;
      }, 50);
    });
  </script>

</body>
</html>
